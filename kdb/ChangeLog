2007-07-13 Keith Owens  <kaos@sgi.com>

	* Increase the size of the debug_alloc pool.
	* Add the caller that obtained each entry in the debug_alloc pool.
	* Poison entries in the debug_alloc pool.
	* Track current and maximum usage in debug_alloc pool.
	* Print the debug_alloc entries that are still in use when kdb exits
	  (memory leaks).
	* Increase the default value of BTARGS to 9.
	* kdb v4.4-2.6.22-common-2.

2007-07-09 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.22-common-1.

2007-07-02 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.22-rc7-common-1.

2007-06-20 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.22-rc5-common-1.

2007-06-15 Keith Owens  <kaos@sgi.com>

	* Do not include asm/kdb.h unless CONFIG_KDB is on.  Dave Jiang.
	* kdb v4.4-2.6.22-rc4-common-2.

2007-06-08 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.22-rc4-common-1.

2007-05-28 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.22-rc3-common-1.

2007-05-22 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.22-rc2-common-1.

2007-05-22 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.22-rc1-common-1.

2007-05-17 Keith Owens  <kaos@sgi.com>

	* Add rdmsr and wrmsr commands for i386 and x86_64.  Original patch by
	  Bernardo Innocenti for i386, reworked by Keith Owens to make it safe
	  on all cpu models and to handle both i386 and x86_64.
	* kdb v4.4-2.6.21-common-3.

2007-05-15 Keith Owens  <kaos@sgi.com>

	* Correct alignment of debug_alloc_header.
	* kdb v4.4-2.6.21-common-2.

2007-04-29 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.21-common-1.

2007-04-16 Keith Owens  <kaos@sgi.com>

	* Remove dead symbol declarations.
	* kdb v4.4-2.6.21-rc7-common-2.

2007-04-16 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.21-rc7-common-1.

2007-04-10 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.21-rc6-common-1.

2007-04-02 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.21-rc5-common-1.

2007-03-19 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.21-rc4-common-1.

2007-03-14 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.21-rc3-common-1.

2007-03-14 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.21-rc2-common-1.

2007-03-01 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.21-rc1-common-1.

2007-03-01 Keith Owens  <kaos@sgi.com>

	* Remove sparse warnings.
	* kdb v4.4-2.6.20-common-6.

2007-02-27 Keith Owens  <kaos@sgi.com>

	* set_irq_regs() on entry to kdb() if they are not already set.
	* kdb v4.4-2.6.20-common-5.

2007-02-22 Keith Owens  <kaos@sgi.com>

	* Initialise struct disassemble_info in kdb_id1().
	* kdb v4.4-2.6.20-common-4.

2007-02-16 Keith Owens  <kaos@sgi.com>

	* Clean up debug_alloc_pool code.
	* kdb v4.4-2.6.20-common-3.

2007-02-16 Keith Owens  <kaos@sgi.com>

	* Initialise variable bits of struct disassemble_info each time.
	* kdb v4.4-2.6.20-common-2.

2007-02-06 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.20-common-1.

2007-02-01 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.20-rc7-common-1.

2007-01-08 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.20-rc4-common-1.

2007-01-02 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.20-rc3-common-1.

2006-12-21 Keith Owens  <kaos@sgi.com>

	* Initialize the debug_kmalloc pool on the first call, so it can be
	  used at any time.
	* kdb v4.4-2.6.20-rc1-common-2.

2006-12-20 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.20-rc1-common-1.

2006-11-30 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.19-common-1.

2006-11-30 Keith Owens  <kaos@sgi.com>

	* Do not access registers if kdb_current_regs is NULL.
	* kdb v4.4-2.6.19-rc6-common-3.

2006-11-27 Keith Owens  <kaos@sgi.com>

	* Only use VT keyboard if the command line allows it and ACPI indicates
	  that there is an i8042.
	* Optimize kdb_read() to reduce the risk of dropping input characters.
	* Print cpumasks as lists instead of hex, also cope with long lists.
	* kdb v4.4-2.6.19-rc6-common-2.

2006-11-20 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.19-rc6-common-1.

2006-11-09 Keith Owens  <kaos@sgi.com>

	* Change kdb() to fastcall.
	* Correct loop in kdb_help().  Georg Nikodym.
	* Only use VT console if the command line allows it.
	* kdb v4.4-2.6.19-rc5-common-2.

2006-11-08 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.19-rc5-common-1.

2006-11-01 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.19-rc4-common-1.

2006-10-24 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.19-rc3-common-1.

2006-10-24 Keith Owens  <kaos@sgi.com>

	* Remove redundant regs and envp parameters.
	* kdb v4.4-2.6.19-rc2-common-2.

2006-10-18 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.19-rc2-common-1.

2006-10-11 Keith Owens  <kaos@sgi.com>

	* Move kdbm_x86.c from the i386 to the common KDB patch.
	* Expand kdbm_x86.c to work on x86_64 as well as i386.
	* kdb v4.4-2.6.19-rc1-common-2.

2006-10-09 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.19-rc1-common-1.

2006-10-06 Keith Owens  <kaos@sgi.com>

	* Remove #include <linux/config.h>
	* kdb v4.4-2.6.18-common-2.

2006-09-20 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.18-common-1.

2006-09-15 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.18-rc7-common-1.

2006-08-29 Keith Owens  <kaos@sgi.com>

	* Rewrite all backtrace code.
	* kdb v4.4-2.6.18-rc5-common-2.

2006-08-28 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.18-rc5-common-1.

2006-08-08 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.18-rc4-common-1.

2006-08-04 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.18-rc3-common-1.

2006-07-18 Keith Owens  <kaos@sgi.com>

	* 8250.c locking has been fixed so there is no need to break spinlocks
	  for keyboard entry.
	* kdb v4.4-2.6.18-rc2-common-2.

2006-07-18 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.18-rc2-common-1.

2006-07-12 Keith Owens  <kaos@sgi.com>

	* Remove dead KDB_REASON codes.
	* The main kdb() function is now always entered with interrupts
	  disabled, so there is no need to disable bottom halves.
	* sparse cleanups.
	* kdb v4.4-2.6.18-rc1-common-2.

2006-07-07 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.18-rc1-common-1.

2006-07-04 Keith Owens  <kaos@sgi.com>

	* Add KDB_REASON_CPU_UP and callbacks for cpus coming online.
	* Relegate KDB_REASON_SILENT to KDB internal use only.
	* Backout the v4.4-2.6.15-common-3 change that made KDB_REASON_SILENT
	  wait for cpus, the Dell Xeon problem has been fixed.
	* notify_die() is not called for KDB_REASON_SILENT nor
	  KDB_REASON_CPU_UP, these events do not stay in KDB.
	* Export kdb_current_task for kdbm_x86.  SuSE patch
	  kdb-missing-export.diff
	* Scale kdb_wait_for_cpus_secs by the number of online cpus.
	* Delete kdb_enablehwfault, architectures now do their own setup.
	* Delete kdba_enable_mce, architectures now do their own setup.
	* Delete kdba_enable_lbr, kdba_disable_lbr, kdba_print_lbr,
	  page_fault_mca.  Only ever implemented on x86, difficult to maintain
	  and rarely used in the field.
	* Replace #ifdef KDB_HAVE_LONGJMP with #ifdef kdba_setjmp.
	* kdb v4.4-2.6.17-common-2.

2006-06-19 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.17-common-1.

2006-05-31 Keith Owens  <kaos@sgi.com>

	* Break spinlocks for keyboard entry.  Hopefully a temporary hack while
	  I track down why keyboard entry to KDB is hanging.
	* kdb v4.4-2.6.17-rc5-common-2.

2006-05-25 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.17-rc5-common-1.

2006-05-15 Keith Owens  <kaos@sgi.com>

	* Refresh bfd related files from binutils 2.16.91.0.2.
	* kdb v4.4-2.6.17-rc4-common-2.

2006-05-12 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.17-rc4-common-1.

2006-04-28 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.17-rc3-common-1.

2006-04-22 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.17-rc2-common-1.

2006-04-11 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.17-rc1-common-1.

2006-04-05 Keith Owens  <kaos@sgi.com>

	* More fixes for the timing race with KDB_ENTER_SLAVE.
	* kdb v4.4-2.6.16-common-5.

2006-03-30 Keith Owens  <kaos@sgi.com>

	* Some code was testing KDB_IS_RUNNING() twice, which left it open to
	  races.  Cache the result instead.
	* kdb v4.4-2.6.16-common-4.

2006-03-30 Keith Owens  <kaos@sgi.com>

	* Change CONFIG_LKCD to CONFIG_LKCD_DUMP.
	* kdb v4.4-2.6.16-common-3.

2006-03-22 Keith Owens  <kaos@sgi.com>

	* Add some more xpc flags.  Dean Nelson, SGI.
	* Replace open coded counter references with atomic_read().
	* Pass early_uart_console to early_uart_setup().  Francois
	  Wellenreiter, Bull.
	* Replace open code with for_each_online_cpu().
	* If cpus do not come into kdb after a few seconds then let
	  architectures send a more forceful interrupt.
	* Close a timing race with KDB_ENTER_SLAVE.
	* kdb v4.4-2.6.16-common-2.

2006-03-21 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.16-common-1.

2006-03-14 Nathan Scott  <nathans@sgi.com>

	* kdb v4.4-2.6.16-rc6-common-1.

2006-02-28 Nathan Scott  <nathans@sgi.com>

	* kdb v4.4-2.6.16-rc5-common-1.

2006-02-20 Nathan Scott  <nathans@sgi.com>

	* kdb v4.4-2.6.16-rc4-common-1.

2006-02-06 Keith Owens  <kaos@sgi.com>

	* Change CONFIG_CRASH_DUMP to CONFIG_LKCD.
	* Remove obsolete kdb_notifier_list.
	* kdb v4.4-2.6.16-rc2-common-2.

2006-02-06 Keith Owens  <kaos@sgi.com>

	* Add xpcusers command.  Dean Nelson, SGI.
	* kdb v4.4-2.6.16-rc2-common-1.

2006-02-02 Keith Owens  <kaos@sgi.com>

	* Check if we have a console before using it for KDB.
	* kdb v4.4-2.6.16-rc1-common-3.

2006-02-01 Keith Owens  <kaos@sgi.com>

	* Add option 'R' to the pid command to reset to the original task.
	* Include 'pid R' in archkdb* commands to reset up the original failing
	  task.  Users may have switched to other cpus and/or tasks before
	  issuing archkdb.
	* Compile fix for kdbm_pg.c on i386.
	* kdb v4.4-2.6.16-rc1-common-2.

2006-01-18 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.16-rc1-common-1.

2006-01-11 Keith Owens  <kaos@sgi.com>

	* Plug a timing race between KDB_ENTER_SLAVE and KDB_ENTER, and allow
	  the cpu command to switch to a slave cpu.
	* KDB_REASON_SILENT now waits for other cpus, to avoid spurious NMI
	  events that were seen on some Xeon systems.
	* kdb v4.4-2.6.15-common-3.

2006-01-08 Keith Owens  <kaos@sgi.com>

	* kdb mainline invokes DIE_KDEBUG_ENTER and DIE_KDEBUG_LEAVE via
	  notify_die.
	* Move xpc debug support from xpc to mainline kdb.
	* kdbm_cm.c: check if file_lock_operations or lock_manager_operations
	  are set before dereferencing them.  Felix Blyakher, SGI.
	* kdb v4.4-2.6.15-common-2.

2006-01-04 Keith Owens  <kaos@sgi.com>

	* Print all buffers on a page in inode pages and update formatting to be
	  legible, too.  David Chinner, SGI.
	* Update page flags in kdbm_pg.
	* Remove inline from *.c files.
	* kdb v4.4-2.6.15-common-1.

2005-12-25 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.15-rc7-common-1.

2005-12-20 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.15-rc6-common-1.

2005-12-10 Keith Owens  <kaos@sgi.com>

	* Update mapping of flags to strings in kdbm_pg.c and kdbm_vm.c.
	* kdb v4.4-2.6.15-rc5-common-3.

2005-12-06 Keith Owens  <kaos@sgi.com>

	* Add RECOVERY flag to global KDB flags.
	* Add kdb_{save,restore}_flags.
	* kdb v4.4-2.6.15-rc5-common-2.

2005-12-05 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.15-rc5-common-1.

2005-12-02 Keith Owens  <kaos@sgi.com>

	* kdbm_vm.c: offsets of page macros should be unsigned long.  Reported
	  by Dean Nelson, SGI.
	* kdb v4.4-2.6.15-rc4-common-1.

2005-11-30 Keith Owens  <kaos@sgi.com>

	* New follow_page() API.
	* kdb v4.4-2.6.15-rc3-common-1.

2005-11-21 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.15-rc2-common-1.

2005-11-15 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.15-rc1-common-1.

2005-11-15 Keith Owens  <kaos@sgi.com>

	* Allow kdb_printf() to be used outside kdb, in preemptible context.
	* Build with CONFIG_SWAP=n.  Reported by Leo Yuriev.
	* kdb v4.4-2.6.14-common-2.

2005-10-28 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.14-common-1.

2005-10-21 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.14-rc5-common-1.

2005-10-11 Keith Owens  <kaos@sgi.com>

	* Handle removal of USB keyboard.  Aaron Young, SGI.
	* kdb v4.4-2.6.14-rc4-common-1.

2005-10-05 Keith Owens  <kaos@sgi.com>

	* Extend kdb_notifier_list() codes to include dumping.
	* Use emergency_restart() for reboot, it can be called from interrupt
	  context, unlike machine_restart().
	* kdb v4.4-2.6.14-rc3-common-1.

2005-09-21 Keith Owens  <kaos@sgi.com>

	* Support kdb_current_task in register display and modify commands.
	* Document what changes kdb's notion of the current task.
	* Update rd documentation for IA64.
	* Move some definictions to kdbprivate.h and remove some unused symbol
	  exports.
	* kdb v4.4-2.6.14-rc2-common-1.

2005-09-20 Keith Owens  <kaos@sgi.com>

	* Document IA64 handlers command.
	* Add more fields to the task command.
	* Cope with MCA/INIT handlers in the ps command.
	* Namespace cleanup, delete unused exports, make some functions static.
	* Add a kdb_notifier_list callback when kdb is about to reboot the
	  system.
	* kdb v4.4-2.6.14-rc1-common-1.

2005-08-29 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.13-common-1.

2005-08-24 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.13-rc7-common-1.

2005-08-08 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.13-rc6-common-1.

2005-08-02 Keith Owens  <kaos@sgi.com>

	* Print more fields from filp, dentry.
	* Add kdb=on-nokey to suppress kdb entry from the keyboard.
	* kdb v4.4-2.6.13-rc5-common-1.

2005-07-30 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.13-rc4-common-1.

2005-07-26 Keith Owens  <kaos@sgi.com>

	* Fix compile problem with CONFIG_USB_KBD.
	* kdb v4.4-2.6.13-rc3-common-3.

2005-07-22 Keith Owens  <kaos@sgi.com>

	* The asmlinkage kdb() patch was lost during packaging.  Reinstate it.
	* kdb v4.4-2.6.13-rc3-common-2.

2005-07-19 Keith Owens  <kaos@sgi.com>

	* Add support for USB keyboard (OHCI only).  Aaron Young, SGI.
	* kdb v4.4-2.6.13-rc3-common-1.

2005-07-08 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.13-rc2-common-1.

2005-07-01 Keith Owens  <kaos@sgi.com>

	* Make kdb() asmlinkage to avoid problems with CONFIG_REGPARM.
	* Change some uses of smp_processor_id() to be preempt safe.
	* Use DEFINE_SPINLOCK().
	* kdb v4.4-2.6.13-rc1-common-1.

2005-06-18 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.12-common-1.

2005-06-08 Keith Owens  <kaos@sgi.com>

	* Correct early exit from bd *.
	* kdb v4.4-2.6.12-rc6-common-1.

2005-05-25 Keith Owens  <kaos@sgi.com>

	* Delete Documentation/kdb/dump.txt.  lkcd now has reasonable
	  integration with kdb.
	* kdb v4.4-2.6.12-rc5-common-1.

2005-05-08 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.12-rc4-common-1.

2005-04-21 Keith Owens  <kaos@sgi.com>

	* Add rpte command (find the pte for a physical page).
	* kdb v4.4-2.6.12-rc3-common-1.

2005-04-06 Keith Owens  <kaos@sgi.com>

	* Add rq and rqa commands.  John Hawkes, SGI.
	* kdb v4.4-2.6.12-rc2-common-1.

2005-03-29 Keith Owens  <kaos@sgi.com>

	* Use register_sysctl_table() instead of patching kernel/sysctl.c.
	* Non-ASCII characters are not printable.
	* kdb v4.4-2.6.12-rc1-common-1.

2005-03-15 Keith Owens  <kaos@sgi.com>

	* More coexistence patches for lkcd.  Jason Uhlenkott, SGI.
	* kdb v4.4-2.6.11-common-3.

2005-03-08 Keith Owens  <kaos@sgi.com>

	* Coexistence patches for lkcd.  Jason Uhlenkott, SGI.
	* kdb v4.4-2.6.11-common-2.

2005-03-03 Keith Owens  <kaos@sgi.com>

	* Add kdb to drivers/serial/8250_early.c.  Francois Wellenreiter, Bull.
	* kdb v4.4-2.6.11-common-1.

2005-02-14 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.11-rc4-common-1.

2005-02-08 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.11-rc3-bk4-common-1.

2005-02-03 Keith Owens  <kaos@sgi.com>

	* Print more superblock fields.  Nathan Scott, SGI.
	* Remove kallsyms correction for modules, Linus took it.
	* kdb v4.4-2.6.11-rc3-common-1.

2005-01-27 Keith Owens  <kaos@sgi.com>

	* Add bio command.  Nathan Scott, SGI.
	* kdb v4.4-2.6.11-rc2-common-1.

2005-01-20 Keith Owens  <kaos@sgi.com>

	* Include kallsyms correction for modules until Linus takes it.
	* kdb v4.4-2.6.11-rc1-bk7-common-1.

2005-01-12 Keith Owens  <kaos@sgi.com>

	* kallsyms now supports all symbols properly, remove kdb patch.
	* Add last ditch allocator for debugging.
	* Update kdb_meminfo_read_proc() for vmalloc changes.
	* Update kdbm_vm.c for 4 level page tables.
	* kdb v4.4-2.6.11-rc1-common-1.

2004-12-25 Keith Owens  <kaos@sgi.com>

	* Add kobject command.
	* Ignore low addresses and large offsets in kdbnearsym().
	* Console updates for sn2 simulator.
	* kdb v4.4-2.6.10-common-1.

2004-12-07 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.10-rc3-common-1.

2004-11-23 Keith Owens  <kaos@sgi.com>

	* Remove warning message from kdb_get_one_user_page(), it was too noisy.
	* kdb v4.4-2.6.10-rc2-common-1.

2004-11-02 Keith Owens  <kaos@sgi.com>

	* Build with kdb patch applied but CONFIG_KDB=n.
	* kdb v4.4-2.6.10-rc1-common-2.

2004-10-29 Keith Owens  <kaos@sgi.com>

	* Handle new compression scheme for kallsyms.
	* Handle move of DEAD and ZOMBIE for task->state to task->exit_state.
	* Tweak the concept of a valid kernel address to get all symbols,
	  including the symbols in the ia64 gate page.
	* kdb v4.4-2.6.10-rc1-common-1.

2004-10-21 Keith Owens  <kaos@sgi.com>

	* Handle variable size for the kernel log buffer.
	* kdb v4.4-2.6.9-common-2.

2004-10-19 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.9-common-1.

2004-10-12 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.9-rc4-common-1.

2004-10-01 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.9-rc3-common-1.

2004-09-30 Keith Owens  <kaos@sgi.com>

	* Add stackdepth command to Documentation/kdb/kdb.mm.  stackdepth is
	  only supported on i386 and ia64 at the moment.
	* Skip kdbm_pg memmap build on x86_64.  Scott Lurndal, 3leafnetworks.
	* Export kdb_serial_str for modular I/O.  Bryan Cardillo, UPenn.
	* Reinstate tab completion for symbols.
	* kdb v4.4-2.6.9-rc2-common-2.

2004-09-14 Keith Owens  <kaos@sgi.com>

	* Add task states C (traCed) and E (dEad).
	* kdb v4.4-2.6.9-rc2-common-1.

2004-08-27 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.9-rc1-common-1.

2004-08-14 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.8-common-1.

2004-08-12 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.8-rc4-common-1.

2004-08-05 Keith Owens  <kaos@sgi.com>

	* Mark kdb_initcall as __attribute_used__ for newer gcc.
	* kdb v4.4-2.6.8-rc3-common-2.

2004-08-04 Keith Owens  <kaos@sgi.com>

	* Add mdp (memory display physical) comnmand.
	  Ananth N Mavinakayanahalli, IBM.
	* kdb v4.4-2.6.8-rc3-common-1.

2004-07-18 Keith Owens  <kaos@sgi.com>

	* Patch for new sn_console.  Erik Jacobson. SGI.
	* kdb v4.4-2.6.8-rc2-common-1.

2004-07-12 Keith Owens  <kaos@sgi.com>

	* Convert kdbm_task to standard cpumask_t.
	* Document '*' (all breakpoints) option on bd/be/bc commands.
	* kdb v4.4-2.6.8-rc1-common-1.

2004-06-30 Keith Owens  <kaos@sgi.com>

	* Common changes to help the x86-64 port.
	* kdb v4.4-2.6.7-common-3.

2004-06-20 Keith Owens  <kaos@sgi.com>

	* Move kdb includes in mm/swapfile.c to reduce conflicts with other
	  SGI patches.
	* kdb v4.4-2.6.7-common-2.

2004-06-16 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.7-common-1.

2004-06-09 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.7-rc3-common-1.

2004-06-09 Keith Owens  <kaos@sgi.com>

	* Namespace clean up.  Mark code/variables as static when it is only
	  used in one file, delete dead code/variables.
	* Saved interrupt state requires long, not int.
	* kdb v4.4-2.6.7-rc2-common-3.

2004-06-08 Keith Owens  <kaos@sgi.com>

	* Whitespace clean up, no code changes.
	* kdb v4.4-2.6.7-rc2-common-2.

2004-06-07 Keith Owens  <kaos@sgi.com>

	* kdb v4.4-2.6.7-rc2-common-1.

2004-06-06 Keith Owens  <kaos@sgi.com>

	* Avoid recursion problems in kdb_init().
	* Add standard archkdb commands.
	* Add per_cpu command.
	* Move kdb_{get,put}userarea_size definitions to linux/kdb.h.
	* kdb v4.4-2.6.6-common-2.

2004-05-23 Keith Owens  <kaos@sgi.com>

	* Shrink the output from the cpu command.
	* Add cpu state 'I', the cpu is idle.
	* Add cpu state '+', some kdb data is available but the cpu is not
	  responding.
	* Do not print tasks in state I or M by default in ps and bta commands.
	* Add states I (idle task) and M (sleeping system daemon) to ps and
	  bta commands.
	* Delete unused variables.
	* Move private kdb fields from kdb.h to kdbprivate.h.
	* Print 'for keyboard entry' for the special cases when KDB_ENTER() is
	  used to get registers.
	* Move bfd.h and ansidecl.h from arch/$(ARCH)/kdb to include/asm-$(ARCH)
	  and remove -I arch/$(ARCH)/kdb.
	* dmesg command now prints from either the start or end of dmesg, or at
	  an arbitrary point in the middle of the kernel log buffer.
	* Sensible string dump for multi byte md commands.
	* 'page' command handles ia64 correctly.
	* Show some activity when waiting for cpus to enter kdb.
	* Change the KDB entry code to <esc>KDB.
	* Allow comment commands, starting with '#'.
	* Commands defined using defcmd from kdb_cmds are not printed as they
	  are entered, use defcmd with no parameters to print all the defined
	  commands.
	* Add summary command.
	* Update copyright notices.
	* Zero suppression on md command.
	* Make set NOSECT=1 the default.
	* PPC64 uses OF-stdout instead of console.  Ananth N Mavinakayanahalli.
	* kdb v4.4-2.6.6-common-1.

2004-05-10 Keith Owens  <kaos@sgi.com>

	* kdb v4.3-2.6.6-common-1.

2004-05-06 Keith Owens  <kaos@sgi.com>

	* kdb v4.3-2.6.6-rc3-common-1.

2004-05-06 Keith Owens  <kaos@sgi.com>

	* kdb v4.3-2.6.6-rc2-common-1.

2004-04-30 Keith Owens  <kaos@sgi.com>

	* Rewrite inode_pages command for new radix code in struct page.
	* kdb v4.3-2.6.6-rc1-common-1.

2004-04-11 Keith Owens  <kaos@sgi.com>

	* Unlock sn_sal_lock before entering kdb from sn_serial.
	* kdb v4.3-2.6.5-common-2.

2004-04-05 Keith Owens  <kaos@sgi.com>

	* kdb v4.3-2.6.5-common-1.

2004-03-22 Keith Owens  <kaos@sgi.com>

	* kdb v4.3-2.6.5-rc2-common-1.

2004-03-12 Keith Owens  <kaos@sgi.com>

	* More work to avoid spurious messages from WARN_CONSOLE_UNLOCKED().
	* bh command bug fixes.  Nathan Scott.
	* kdb v4.3-2.6.4-common-1.

2004-03-06 Keith Owens  <kaos@sgi.com>

	* Set KDB_IS_RUNNING() during kdb_init to avoid spurious messages from
	  WARN_CONSOLE_UNLOCKED().
	* Correct loss of symbol names in kdbnearsym.
	* kdb v4.3-2.6.4-rc2-common-1.

2004-02-29 Keith Owens  <kaos@sgi.com>

	* kdb v4.3-2.6.4-rc1-common-1.

2004-02-21 Keith Owens  <kaos@sgi.com>

	* Correct build of kdb_cmds when using a separate object directory and
	  make it quiet.  j-nomura (NEC), Keith Owens.
	* kdb v4.3-2.6.3-common-2.

2004-02-18 Keith Owens  <kaos@sgi.com>

	* kdb v4.3-2.6.3-common-1.

2004-02-17 Keith Owens  <kaos@sgi.com>

	* Remove WAR for incorrect console registration patch.
	* kdb v4.3-2.6.3-rc4-common-1.

2004-02-17 Keith Owens  <kaos@sgi.com>

	* Convert longjmp buffers from static to dynamic allocation, for large
	  cpu counts.
	* Tweak kdbm_task for SMP/UP.
	* Reconcile with kdb-v4.3 2.4.25-rc1-common-1.
	* Simplify coexistence with NPTL patches.
	* Support kill command on new scheduler.
	* Do not refetch data when printing a value as characters.
	* Document the pid command.
	* Work around 2.6 kallsyms 'feature'.
	* Upgrade to 2.6.3-rc3.
	* WAR for incorrect console registration patch.
	* kdb v4.3-2.6.3-rc3-common-1.

2003-12-03 Keith Owens  <kaos@sgi.com>

	* Reconcile 2.6-test versions from Xavier Bru (Bull), Greg Banks (SGI),
	  Jim Houston (Concurrent Computer Corp).
	* Reconcile with kdb v4.3-2.4.23-common-2.
	* Clean up CONFIG_KDB changes to {scripts,kernel}/kallsyms.c.
	* Correct handling of kdb command line arguments.
	* Make hooks into module code less intrusive.
	* Delete kdb_active_task, not required with O(1) scheduler.
	* Port kdbm_task.c from 2.4.
	* Disable debug check in exit.c::next_thread() when kdb is running.
	* Remove "only bh_disable when interrupts are set".  BH must be disabled
	  in kdb to prevent deadlock on breakpoints in interrupt handlers.
	* Add kdb to drivers/char/sn_serial.c.
	* kdb v4.3-2.6.0-test11-common-1.

2003-11-11 Xavier Bru   <xavier.bru@bull.net>
	* Merge to 2.6.0-test9
2003-10-17 Xavier Bru   <xavier.bru@bull.net>
	* fix NUll ptr in kdb_ps at early prompt.
2003-10-14 Xavier Bru   <xavier.bru@bull.net>
	* fix NUll ptr in kdb_ps when cpu not present.
2003-10-06 Xavier Bru   <xavier.bru@bull.net>
	* Merge to 2.6.0-test5
	* fix compile error with CONFIG_MODULES not set.

2003-09-08 Xavier Bru   <xavier.bru@bull.net>
	* Merge to 2.6.0-test4

2003-07-10 Xavier Bru   <xavier.bru@bull.net>

	* Merge kdb v4.3 to 2.5.72 ia64
	* don't call local_bh_enable() with interrupts masked.

2003-04-07 Xavier Bru   <xavier.bru@bull.net>

	* Merge kdb v4.1 to 2.5.64 ia64
	* new kernel parameters support
	* new module format
	* new kallsyms support

2003-12-02 Keith Owens  <kaos@sgi.com>

	* Use correct page alignment in kdb_get_one_user_page().
	  Prasanna S Panchamukhi, IBM.
	* Split pte command into pte -m and pte -p.  Dean Roe, SGI.
	* kdb v4.3-2.4.23-common-2.

2003-12-01 Keith Owens  <kaos@sgi.com>

	* kdb v4.3-2.4.23-common-1.

2003-11-11 Keith Owens  <kaos@sgi.com>

	* Make KDB for USB keyboards build.  Peter T. Breuer.
	* Do not use USB keyboard if it has not been probed.
	* kdb v4.3-2.4.23-rc1-common-1.

2003-10-10 Keith Owens  <kaos@sgi.com>

	* Sync with XFS 2.4.22 tree.
	* kdb v4.3-2.4.22-common-2.

2003-08-29 Keith Owens  <kaos@sgi.com>

	* kdb v4.3-2.4.22-common-1.

2003-07-27 Keith Owens  <kaos@sgi.com>

	* kdb v4.3-2.4.22-pre8-common-8.

2003-07-20 Keith Owens  <kaos@sgi.com>

	* Make kdb_serial_str a common constant, the same for all consoles.
	* Support SGI L1 console.
	* kdb v4.3-2.4.21-common-8.

2003-07-14 Keith Owens  <kaos@sgi.com>

	* Correct ll command.
	* kdb v4.3-2.4.21-common-7.

2003-07-08 Keith Owens  <kaos@sgi.com>

	* Export more kdb symbols.  Vamsi Krishna S., IBM.
	* kdb v4.3-2.4.21-common-6.

2003-07-07 Keith Owens  <kaos@sgi.com>

	* Tweak 'waiting for cpus' message.
	* kdb v4.3-2.4.21-common-5.

2003-07-07 Keith Owens  <kaos@sgi.com>

	* 2.4.21-ia64-030702 patches common code that affects kdb.  Workaround
	  this nuisance.
	* kdb v4.3-2.4.21-common-4.

2003-06-24 Keith Owens  <kaos@sgi.com>

	* Add task and sigset commands.  Mark Goodwin, SGI.
	* kdb v4.3-2.4.21-common-3.

2003-06-23 Keith Owens  <kaos@sgi.com>

	* Sync with XFS 2.4.21 tree.
	* kdb v4.3-2.4.21-common-2.

2003-06-20 Keith Owens  <kaos@sgi.com>

	* kdb v4.3-2.4.21-common-1.

2003-06-20 Keith Owens  <kaos@sgi.com>

	* More details on vm command, add vmp and pte commands.
	  Dean Nelson, Dean Roe, SGI.
	* YAO1SCF (Yet Another O(1) Scheduler Coexistence Fix).
	* Changes to common code to build on sparc.  Tom Duffy.
	* Move Tom Duffy's changes to drivers/sbus from the sparc64
	  patch to the common patch to keep all the serial changes
	  together.
	* Changes to common code to build on Xscale.  Eddie Dong, Intel.
	* Remove CROSS_COMPILE_INC.
	* Remove obsolete boot parameter 'kdb', long since replaced by
	  'kdb=on'.
	* Remove obsolete kdb_eframe_t casts.
	* Add CONFIG_KDB_CONTINUE_CATASTROPHIC.
	* Wait a short interval for cpus to join kdb before proceeding.
	* Automatically enable sysrq for sr command.
	* Correct double free of kdb_printf lock, spotted by Richard Sanders.
	* Add optional cpu parameter to btc command.
	* kdb v4.3-2.4.20-common-1.

2003-05-02 Keith Owens  <kaos@sgi.com>

	* Some architectures have problems with the initial empty kallsyms
	  section so revert to three kallsyms passes.
	* Flush buffered input at startup and at 'more' prompt.
	* Only print 'more' prompt when longjmp data is available.
	* Print more data for buffers and inodes.
	* Disable kill command when O(1) scheduler is installed, the code
	  needs to be redone for O(1).
	* The kernel has an undocumented assumption that enable_bh() is
	  always called with interrupts enabled, make it so.
	* Print trailing punctuation even for symbols that are not in kernel.
	* Add read/write access to user pages.  Vamsi Krishna S., IBM
	* Rename cpu_is_online to cpu_online, as in 2.5.
	* O(1) scheduler removes init_task so kdb maintains its own list of
	  active tasks.
	* Delete btp 0 <cpuid> option, it needed init_tasks.
	* Clean up USB keyboard support.  Steven Dake.
	* Sync with XFS 2.4.20 tree.
	* kdb v4.2-2.4.20-common-1.

2003-04-04 Keith Owens  <kaos@sgi.com>

	* Remove one kallsyms pass.
	* Automatic detection of O(1) scheduler.
	* Rename cpu_online to cpu_is_online.
	* Workarounds for scheduler bugs.
	* Tweak algorithm for detecting if cpu process data is available.
	* Add 'kill' command.  Sonic Zhang, Keith Owens.
	* kdb v4.1-2.4.20-common-1.

2003-03-16 Keith Owens  <kaos@sgi.com>

	* Each cpu saves its state as it enters kdb or before it enters code
	  which cannot call kdb.
	* Allow btp on process 0 for a specified cpu.
	* Add btt command, backtrace given a struct task address.
	* btc command no longer switches cpus, instead it uses the saved data.
	* bta shows the idle task on each cpu as well as real tasks, the idle
	  task could be handling an interrupt.
	* ps command shows the idle task on each cpu.
	* ps checks that the saved data for a cpu matches the process running on
	  that cpu and warns about stale saved data or no saved data at all.
	* Remove special cases for i386 backtrace from common code and simplify
	  common bt code.
	* Clean up kdb interaction with CONFIG_SERIAL_CONSOLE.
	* Do not automatically repeat commands after the user typed 'q'.
	* O(1) scheduler patch changes the process cpu field but does not set
	  any indicator that O(1) is being used.  Adjust kdb_process_cpu() by
	  hand after applying O(1).
	* Add kdb_print_nameval() to common code.
	* Convert tests of cpu_online_map to cpu_online() macro.
	* module.h needs errno.h when compiling with CONFIG_MODULES=n.
	* Correct duplicate breakpoint handling.
	* Do not try to send IPI during a catastrophic error, send_ipi can hang
	  and take kdb with it.
	* kdb memmap command is i386 only, restrict it.
	* Add large block device (LBD) support from XFS tree.  Eric Sandeen.
	* kdb v4.0-2.4.20-common-1.

2003-02-03 Keith Owens  <kaos@sgi.com>

	* Register kdb commands early.
	* Decode oops via kallsyms if it is available.
	* Update copyright notices to 2003.
	* Add defcmd/endefcmd to allow users to package their own macros.
	* kdb commands that fail are ignored when prefixed with '-'.
	* Add selection options to bta command.
	* Add btc command (switch to each cpu and backtrace).
	* Do real time detection of dead cpus.
	* Clear ip adjusted flag when leaving kdb.
	* Clean up ps command.
	* Print ps output for each task when backtracing.
	* Bump to version v3.0 to reduce confusion between kdb and kernel
	  version numbers.
	* Add kdba_local_arch_setup/kdba_local_arch_cleanup to correct
	  keyboard freeze.  Ashish Kalra.
	* Refuse multiple breakpoints at the same address.
	* Add fl (file_lock) command, from XFS development tree.
	* Correct inode_pages, from XFS development tree.
	* Add command history and editing.  Sonic Zhang.
	* Extend command history and editing to handle vt100 escape sequences.
	* Allow tab completion at start of line.
	* Touch nmi watchdog on long running bta and btc commands.
	* Clean up ps output and standardize with bta codes.
	* Correctly handle escaped characters in commands.
	* Update man pages for btc and command history/editing.
	* kdb v3.0-2.4.20-common-1.

2002-11-29 Keith Owens  <kaos@sgi.com>

	* Upgrade to 2.4.20.
	* Correct Documentation/kdb/kdb_sr.man.
	* Remove leading zeroes from pids, they are decimal, not octal.
	* kdb v2.5-2.4.20-common-1.

2002-11-14 Keith Owens  <kaos@sgi.com>

	* Upgrade to 2.4.20-rc1.
	* kdb v2.5-2.4.20-rc1-common-1.

2002-11-14 Keith Owens  <kaos@sgi.com>

	* Fix processing with O(1) scheduler.
	* 'go' switches back to initial cpu first.
	* 'go <address>' only allowed on initial cpu.
	* 'go' installs the global breakpoints from the initial cpu before
	   releasing the other cpus.
	* If 'go' has to single step over a breakpoint then it single steps just
	  the initial cpu, installs the global breakpoints then releases the
	  other cpus.
	* General clean up of handling for breakpoints and single stepping over
	  software breakpoints.
	* Add kdb_notifier_block so other code can tell when kdb is in control.
	* kdb v2.5-2.4.19-common-1.

2002-11-02 Keith Owens  <kaos@sgi.com>

	* Correct build without CONFIG_KDB.
	* kdb v2.4-2.4.19-common-3.

2002-11-01 Keith Owens  <kaos@sgi.com>

	* Minimize differences from 2.5.44.
	* kdb v2.4-2.4.19-common-2.

2002-10-31 Keith Owens  <kaos@sgi.com>

	* Add defcmd/endefcmd feature.
	* Remove kdb_eframe_t.
	* Clear bp data before using.
	* Sanity check if we have pt_regs.
	* Force LINES > 1.
	* Remove special case for KDB_REASON_PANIC, use KDB_ENTER() instead.
	* Remove kdba_getcurrentframe().
	* Coexist with O(1) scheduler.
	* Add lines option to dmesg, speed up dmesg.
	* kdb v2.4-2.4.19-common-1.

2002-10-17 Keith Owens  <kaos@sgi.com>

	* Add selection critera to ps and bta commands.
	* kdb v2.3-2.4.19-common-4.

2002-10-07 Keith Owens  <kaos@sgi.com>

	* New man page, Documentation/kdb/kdb_sr.man.

2002-10-04 Keith Owens  <kaos@sgi.com>

	* Minimize differences between patches for 2.4 and 2.5 kernels.
	* Add Configure.help for CONFIG_KDB_USB.
	* Reduce stack usage.
	* kdb v2.3-2.4.19-common-3.

2002-08-10 Keith Owens  <kaos@sgi.com>

	* Replace kdb_port with kdb_serial to support memory mapped I/O.
	  David Mosberger.
	* kdb v2.3-2.4.19-common-2.

2002-08-07 Keith Owens <kaos@sgi.com>

	* Upgrade to 2.4.19.
	* Remove individual SGI copyrights, the general SGI copyright applies.
	* Handle md0.  Reported by Hugh Dickins, different fix by Keith Owens.
	* Use page_address() in kdbm_pg.c.  Hugh Dickins.
	* Remove debugging printk from kdbm_pg.c.  Hugh Dickins.
	* Move breakpoint address verification into arch dependent code.
	* Dynamically resize kdb command table as required.
	* Common code to support USB keyboard.  Sebastien Lelarge.
	* kdb v2.3-2.4.19-common-1.

2002-07-09 Keith Owens <kaos@sgi.com>

	* Upgrade to 2.4.19-rc1.
	* Add dmesg command.
	* Clean up copyrights, Eric Sandeen.
	* kdb v2.2-2.4.19-rc1-common-1.

2002-06-14 Keith Owens <kaos@sgi.com>

	* Upgrade to 2.4.19-pre10.
	* Sync with XFS.
	* kdb v2.1-2.4.19-pre10-common-1.

2002-04-09 Keith Owens <kaos@sgi.com>

	* Upgrade to 2.4.19-pre6.
	* kdb v2.1-2.4.19-pre6-common-1.

2002-03-18 Keith Owens <kaos@sgi.com>

	* Syntax check mdWcN commands.

2002-03-01 Keith Owens <kaos@sgi.com>

	* Sync with XFS 2.4.18.
	* kdb v2.1-2.4.18-common-2.

2002-02-26 Keith Owens <kaos@sgi.com>

	* Upgrade to 2.4.18.
	* Add Paul Dorwin (IBM) magicpoint slides on using kdb as
	  Documentation/kdb/slides.
	* kdb v2.1-2.4.18-common-1.

2002-01-23 Keith Owens <kaos@sgi.com>

	* Sync with XFS pagebuf changes.
	* kdb v2.1-2.4.17-common-2.

2002-01-18 Keith Owens <kaos@sgi.com>

	* Ignore single stepping during panic.
	* Remove kdba_getword, kdba_putword.  Replace with kdb_getword,
	  kdb_putword that rely on copy_xx_user.  The new functions return
	  an error code, like copy_xx_user.
	* New functions kdb_getarea, kdb_putarea for copying areas of data
	  such as structures.  These functions also return an error code.
	* Change all common code to use the new functions.
	* bp command checks that it can read and write the word at the
	  breakpoint before accepting the address.
	* Break points are now set FIFO and cleared LIFO so overlapping
	  entries give sensible results.
	* Verify address before disassembling code.
	* Common changes for sparc64.  Ethan Solomita, Tom Duffy.
	* Remove ss <count>, never supported.
	* Remove kallsyms entries from arch vmlinux.lds files.
	* Specify which commands auto repeat.
	* kdb v2.1-2.4.17-common-1.

2002-01-07 Keith Owens <kaos@sgi.com>

	* Remove console semaphore code, not good in interrupt.
	* Remove fragment of ia64 patch that had crept into kdb.
	* Release as kdb v2.0-2.4.17-common-3.

2002-01-04 Keith Owens  <kaos@sgi.com>

	* Sync xfs <-> kdb common code.

2001-12-22 Keith Owens  <kaos@sgi.com>

	* Upgrade to 2.4.17.
	* Clean up ifdef CONFIG_KDB.
	* Add ifdef CONFIG_KDB around include kdb.h.
	* Delete dummy kdb.h files for unsupported architectures.
	* Delete arch i386 and ia64 specific files.  This changelog now
	  applies to kdb common code only.
	* Release as kdb v2.0-2.4.17-common-1.

2001-12-03 Keith Owens  <kaos@sgi.com>

	* Upgrade to 2.4.16.
	* Add include/asm-um/kdb.h stub to allow XFS to be tested under UML.
	* Check if an interrupt frame on i386 came from user space.
	* Out of scope bug fix in kdb_id.c.  Ethan Solomita.
	* Changes to common code to support sparc64.  Ethan Solomita.
	* Change GFP_KERNEL to GFP_ATOMIC in disasm.  Ethan Solomita.

2001-11-16 Keith Owens  <kaos@sgi.com>

	* Upgrade to 2.4.15-pre5.
	* Wrap () around #define expressions with unary operators.

2001-11-13 Keith Owens  <kaos@sgi.com>

	* Upgrade to 2.4.15-pre4.
	* kbdm_pg.c patch from Hugh Dickins.

2001-11-07 Keith Owens  <kaos@sgi.com>

	* Upgrade to 2.4.14-ia64-011105.
	* Change name of l1 serial I/O routine, add ia64 init command.  SGI.
	* Sync kdbm_pg with XFS.

2001-11-06 Keith Owens  <kaos@sgi.com>

	* Upgrade to kernel 2.4.14.

2001-11-02 Keith Owens  <kaos@sgi.com>

	* Sync kdbm_pg.c with XFS.

2001-10-24 Keith Owens  <kaos@sgi.com>

	* Upgrade to kernel 2.4.13.

2001-10-14 Keith Owens  <kaos@melbourne.sgi.com>

	* More use of TMPPREFIX in top level Makefile to speed up NFS compiles.

	* Correct repeat calculations in md/mds commands.

2001-10-10 Keith Owens  <kaos@melbourne.sgi.com>

	* Copy bfd.h and ansidecl.h to arch/$(ARCH)/kdb, remove dependecies on
	  user space includes.

	* Update kdb v1.9 to kernel 2.4.11.

2001-10-01 Keith Owens  <kaos@melbourne.sgi.com>

	* Update kdb v1.9 to kernel 2.4.11-pre1 and 2.4.10-ac1.

	* Correct loop in kdb_parse, reported by Tachino Nobuhiro.

2001-09-25 Keith Owens  <kaos@melbourne.sgi.com>

	* Update kdb v1.8 to kernel 2.4.10.

	* kdbm_pg patch from Hugh Dickens.

	* DProbes patch from Bharata B Rao.

	* mdWcn and mmW patch from Vamsi Krishna S.

	* i386 disasm layout patch from Jean-Marc Saffroy.

	* Work around for 64 bit binutils, Simon Munton.

	* kdb.mm doc correction by Chris Pascoe.

	* Enter repeats the last command, IA64 disasm only prints one
	  instruction.  Don Dugger.

	* Allow kdb/modules to be linked into vmlinux.

	* Remove obsolete code from kdb/modules/kdbm_{pg,vm}.c.

	* Warn when commands are entered at more prompt.

	* Add MODULE_AUTHOR, DESCRIPTION, LICENSE.

	* Release as kdb v1.9.

2001-02-27 Keith Owens  <kaos@melbourne.sgi.com>

	* Update kdb v1.8 to kernel 2.4.2, sync kdb/modules with XFS.

	* Hook into panic() call.

2000-12-18 Keith Owens  <kaos@melbourne.sgi.com>

	* Update kdb v1.7 to kernel 2.4.0-test13-pre3, sync kdb/modules with
	XFS.

2000-11-18 Keith Owens  <kaos@melbourne.sgi.com>

	* Update to kernel 2.4.0-test11-pre7, including forward port of
	bug fixes from WIP 2.4.0-test9 tree.

	* Update to Cygnus CVS trees for disassembly code.

	* Bump to kdb v1.6.

2000-10-19 Keith Owens  <kaos@melbourne.sgi.com>

	* Update to kernel 2.4.0-test10-pre4.

2000-10-15 Keith Owens  <kaos@melbourne.sgi.com>

	* kdb/kdbmain.c (kdb_parse): Correctly handle blank input.

	* kdb/kdbmain.c (kdb_local, kdb): Reason SILENT can have NULL regs.

2000-10-13 Keith Owens  <kaos@melbourne.sgi.com>

	* kdb/kdbmain.c: Reduce CMD_LEN to avoid overflowing kdb_printf buffer.

2000-10-11 Keith Owens  <kaos@melbourne.sgi.com>

	* kdb/kdbmain.c (kdb): Test for userspace breakpoints before driving
	  other cpus into kdb.  Speeds up gdb and avoids SMP race.

	* arch/i386/kdb/kdba_io.c (get_serial_char, get_kbd_char): Ignore
	  unprintable characters.

	* arch/i386/kdb/kdba_io.c (kdba_read): Better handling of buffer size.

2000-10-04 Keith Owens  <kaos@melbourne.sgi.com>

	* arch/i386/kdb/kdba_bt.c (kdba_bt_process): Verify that esp is inside
	task_struct.  Original patch by Mike Galbraith.

	* kdb/kdb_io.c (kdb_getstr): Reset output line counter, remove
	unnecessary prompts.

	* arch/i386/kdb/kdbasupport.c (kdb_getregcontents): Change " cs" to
	"xcs", ditto ss, ds, es.  gdb2kdb does not like leading spaces.

	* include/asm-xxx/kdb.h: Add dummy kdb.h for all architectures except
	ix86.  This allows #include <linux/kdb.h> to appear in arch independent
	code without causing compile errors.

	* kdb/modules/kdbm_pg: Sync with XFS.

2000-10-03  Keith Owens  <kaos@melbourne.sgi.com>

	* kdb/kdb_io.c (kdb_read): Ignore NMI while waiting for input.

	* kdb/kdb_io.c, kdb/Makefile: Export kdb_read.

2000-10-02  Keith Owens  <kaos@melbourne.sgi.com>

	* arch/i386/kernel/smpboot.c (do_boot_cpu): Set nmi_watchdog_source to 2
	to avoid premature NMI oops during cpu bring up.  We have to assume that
	a box with more than 1 cpu has a working IO-APIC.

	* Documentation/kdb/{kdb.mm,kdb_md.man}: Add mdr command.

	* kdb/kdbmain.c (kdb_md): Add mdr command.

	* Release as kdb v1.5 against 2.4.0-test9-pre8.

	* arch/i386/kdb/kdba_io.c, arch/i386/kdb/kdbasupport.c, kdb/kdbmain.c,
	kdb/kdb_io.c, kdb/kdb_id.c: Remove zero initializers for static
	variables.

2000-09-28  Keith Owens  <kaos@melbourne.sgi.com>

	* various: Add nmi_watchdog_source, 1 local APIC, 2 IO-APIC.
	Test nmi_watchdog_source instead of nr_ioapics so UP works on SMP hardware.

	* arch/i386/kernel/io_apic.c: Rename setup_nmi to setup_nmi_io for clarity.

	* kdb/kdbmain.c (kdb_parse): Only set NO_WATCHDOG if it was already set.

	* kdb/kdbmain.c (kdb): Clear NO_WATCHDOG on all exit paths.

	* include/linux/kdb.h: Add KDB_REASON_SILENT.

	* kdb/kdbmain.c (kdb_local): Treat reason SILENT as immediate 'go'.

	* kdb/kdbmain.c (kdb_init): Invoke kdb with reason SILENT to instantiate
	any breakpoints on boot cpu.

	* arch/i386/kernel/smpboot.c (smp_callin): Invoke kdb with reason SILENT
	to instantiate any global breakpoints on this cpu.

	* kdb/kdb_cmds: Remove comment that said initial commands only worked on
	boot cpu.

2000-09-27  Keith Owens  <kaos@melbourne.sgi.com>

	* arch/i386/kernel/msr.c: Move {rd,wr}msr_eio to include/asm-i386/apic.h.

	* include/asm-i386/apic.h: Define NMI interfaces.

	* kernel/sysctl.c (kern_table):
	* kernel/sysctl.c (do_proc_set_nmi_watchdog):
	Add /proc/sys/kernel/nmi_watchdog.

	* arch/i386/kernel/apic.c: New routines set_nmi_counter_local,
	setup_apic_nmi_watchdog.

	* arch/i386/kernel/traps.c: New routine set_nmi_watchdog().  Call apic
	routines to set/clear local apic timer.

2000-09-26  Keith Owens  <kaos@melbourne.sgi.com>

	* include/linux/sysctl.h (enum): Add NMI_WATCHDOG.

	* arch/i386/kernel/traps.c (nmi_watchdog_tick): Check nmi_watchdog is
	still on.

	* arch/i386/config.in: Add CONFIG_UP_NMI_WATCHDOG.

	* Documentation/Configure.help: Add CONFIG_UP_NMI_WATCHDOG.

	* Documentation/nmi_watchdog.txt: Update for UP NMI watchdog.

2000-09-25  Keith Owens  <kaos@melbourne.sgi.com>

	* arch/i386/kernel/apic.c (init_apic_mappings):
	* arch/i386/kernel/io_apic.c (IO_APIC_init_uniprocessor):
	Merge Keir Fraser's local APIC for uniprocessors patch.

2000-09-24  Keith Owens  <kaos@melbourne.sgi.com>

	* Various: Declare initialization routines as __init.

	* Makefile: Define and export AWK.

	* kdb/Makefile: Generate gen-kdb_cmds.c from kdb/kdb_cmds.

	* kdb/kdbmain.c (kdb_init): Call new routine kdb_cmds_init to execute
	whatever the user put in kdb/kdb_cmds.

	* arch/i386/kdb/kdba_bt.c (kdba_bt_stack): New parameter to
	indicate if esp in regs is known to be valid or not.

	* kdb/kdb_bp.c, arch/i386/kdb/kdba_bp.c: More trace prints for
	breakpoint handling.

	* arch/i386/kdb/kdba_bp.c (kdba_installbp): Finally found and fixed the
	annoying breakpoint bug where breakpoints where not always installed
	after 'go'.

	* Documentation/kdb: Update man pages kdb.mm, kdb_env.man, kdb_ss.man.

	* Released as kdb-v1.5-beta1-2.4.0-test8.

	* Sync to 2.4.0-test9-pre6 and release as kdb-v1.5-beta1-2.4.0-test9-pre6.

2000-09-23  Keith Owens  <kaos@melbourne.sgi.com>

	* arch/i386/kdb/kdbasupport.c (kdba_getregcontents): New pseudo
	registers cesp and ceflags to help with debugging the debugger.

	* kdb/kdbmain.c (kdb_local, kdb): Add KDB_REASON_RECURSE.  Add
	environment variable RECURSE.  Add code to cope with some types of
	recursion.

	* kdb/kdbmain.c (kdb), arch/i386/kdba/kdba_bp.c: Add
	kdba_clearsinglestep.

2000-09-22  Keith Owens  <kaos@melbourne.sgi.com>

	* drivers/video/vgacon.c (write_vga): No cli() if kdb is running, avoid
	console deadlock.

	* arch/i386/kernel/irq.c (get_irqlock): Warn if kdb is running, may hang.

	* include/linux/kdb.h: Define KDB_IS_RUNNING as (0) if no CONFIG_KDB.

	* arch/i386/kdb/kdba_bt.c (kdba_bt_stack): Do not attempt a backtrace if
	the code segment is not in the kernel.

	* kdb/modules: Change modules from MX_OBJS to M_OBJS.  Remove EXPORT_NOSYMBOLS.

2000-09-21  Keith Owens  <kaos@melbourne.sgi.com>

	* arch/i386/kernel/i386_ksyms.c: Move EXPORT_SYMBOLS for kdb to kdb/kdbmain.c.

	* kdb/Makefile: Change kdb/kdbmain.o from O_OBJS to OX_OBJS.

	* arch/i386/kernel/smp.c: Remove some #ifdef CONFIG_KDB.  Remove kdbprivate.h.

	* include/linux/kdb.h: Add kdb_print_state.  Add KDB_STATE_WAIT_IPI.

	* kdb/kdbmain.c (kdb): Only mark cpu as leaving if it is in KDB state.  Maintain
	WAIT_IPI state so a cpu is only driven through NMI once.

	* arch/i386/kernel/smp.c (smp_kdb_stop): All state fiddling moved to kdb().

2000-09-20  Keith Owens  <kaos@melbourne.sgi.com>

	* include/linux/kdb.h: #define kdb() as (0) if kdb is not configured.

	* arch/i386/kernel/traps.c: Remove some #ifdef CONFIG_KDB.

	* include/linux/kdbprivate.h: Move per cpu state to kdb.h.

	* include/linux/kdb.h: Add KDB_STATE_NO_WATCHDOG, KDB_STATE_PRINTF_LOCK.
	Rename KDB_DEBUG_xxx to KDB_DEBUG_FLAG_xxx.  Clean up debug flag
	definitions.

	* arch/i386/kernel/traps.c (nmi_watchdog_tick): Check no watchdog.

	* kdb/kdbmain.c (kdb): Set no watchdog in normal kdb code.

	* kdb/kdbmain.c (kdb_parse): Allow watchdog in commands.

	* kdb/kdb_io.c (kdb_printf): No watchdog during printing.  Clean up lock handling.

	* kdb/kdbmain.c (kdb_set): Clean up debug flag handling.

2000-09-19  Juan J. Quintela  <quintela@fi.udc.es>

	* kdb/arch/i386/kdb/kdba_io.c: Allow kdb to compile without CONFIG_VT and/or
	serial console.

2000-09-19  Keith Owens  <kaos@melbourne.sgi.com>

	* include/linux/kdb.h: Define KDB_DEBUG_STATE().

	* kdb/kdbmain.c (kdb): Add kdb_print_state(), calls to KDB_DEBUG_STATE().

2000-09-16  Keith Owens  <kaos@melbourne.sgi.com>

	* Move to finer grained control over individual processors in kdb with
	per cpu kdb state.  Needed to allow ss[b] to only release one processor,
	previously ss[b] released all processors.  Also need to recover from
	errors inside kdb commands, e.g. oops in kdbm_pg code.

	* various:
	  Move global flags KDB_FLAG_SSB, KDB_FLAG_SUPRESS, KDB_FLAG_FAULT,
	  KDB_FLAG_SS, KDB_FLAG_SSBPT, kdb_active, to per cpu state and macros
	  KDB_STATE(xxx).
	  Replace kdb_flags & KDB_FLAG_xxx with KDB_FLAG(xxx).
	  Replace kdb_flags & KDB_DEBUG_xxx with KDB_DEBUG(xxx).
	  Replace specific tests with wrapper KDB_IS_RUNNING().

	* various: Remove #ifdef CONFIG_SMP from kdb code wherever
	possible.  Simplifies the code and makes it much more readable.

	* arch/i386/kdb/kdbasupport.c (kdb_setjmp): Record if we have reliable
	longjmp data instead of assuming it is always set.

	* various: Replace smp_kdb_wait with per cpu state, HOLD_CPU.

	* init/main.c : Replace #ifdef KDB_DEBUG with KDB_DEBUG(CALLBACK).

	* include/linux/kdbprivate.h: Separate command return codes from error
	codes.  Add more detailed command codes.

	* arch/i386/kernel/traps.c (die): Change spin_lock_irq to
	spin_lock_irqsave.  Why did I do this?

	* kdb/kdbmain.c (kdb_parse): Set per cpu flag CMD before executing kdb
	command.  More detailed return codes for commands that affect
	processors.

	* kdb/kdbmain.c (kdb_previous_event): New, check if any processors are
	still executing the previous kdb event.  Removes a race window where a
	second event could enter kdb before the first had completely ended.

	* kdb/kdbmain.c (kdb): Document all the concurrency conditions and how
	kdb handles them.  ss[b] now releases only the current cpu.  Do not set
	breakpoints when releasing for ss[b].  Recover from errors in kdb
	commands.  Check that we have reliable longjmp data before using it.

	* various: Update return code documentation.

	* kdb/kdb_bp.c (kdb_ss): Separate ss and ssb return codes.

	* kdb/kdbsupport.c (kdb_ipi): Finer grained algorithm for deciding
	whether to call send a stop signal to a cpu.

	* arch/i386/kdb/kdba_bp.c (kdba_db_trap): Separate ss and ssb return
	codes.  Reinstall delayed software breakpoints per cpu instead of
	globally.  Changed algorithm for handling ss[b].

	* arch/i386/kdb/kdba_bp.c (kdba_bp_trap): Match software breakpoints per
	cpu instead of globally.

	* include/linux/kdb.h: Bump version to kdb v1.5.

2000-09-16  Keith Owens  <kaos@melbourne.sgi.com>

	* kernel/sysctl.c (kern_table): add /proc/sys/kernel/kdb.

	* init/main.c (parse_options): add boot flags kdb=on, kdb=off,
	kdb=early.

	* include/linux/sysctl.h (enum): add KERN_KDB.

	* drivers/char/serial.c (receive_chars): check kdb_on.

	* drivers/char/keyboard.c (handle_scancode): check kdb_on.

	* arch/i386/kernel/traps.c (nmi_watchdog_tick): check kdb_on.

	* arch/i386/config.in: add CONFIG_KDB_OFF.

	* Documentation/Configure.help: add CONFIG_KDB_OFF.

	* kdb/kdbmain.c: add kdb_initial_cpu, kdb_on.

	* kdb/kdbmain.c (kdb): check kdb_on, set kdb_initial_cpu.

	* kdb/kdbmain.c (kdb_init): add Keith Owens to kdb banner.

	* kdb/kdb_io.c (kdb_printf): serialize kdb_printf output.

	* kdb/kdb_bt.c (kdb_bt): check environment variable BTAPROMPT.

	* kdb/kdbsupport.c (kdb_ipi): ignore NMI for kdb_initial_cpu.

	* kdb/modules/kdbm_pg.c (kdbm_page): merge updates from 2.4.0-test5-xfs.

	* kdb/kdb_bt.man: add btp, bta, BTAPROMPT.

	* kdb/kdb.mm: add CONFIG_KDB_OFF, boot flags, btp, bta.

	* include/linux/kdbprivate.h: add kdb_initial_cpu.

	* include/linux/kdb.h: add kdb_on, bump version to kdb v1.4.
